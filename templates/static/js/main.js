provide("util/util",function(e){function t(e){return e&&String(e).toLowerCase().indexOf("[native code]")>-1}function n(e){return o(arguments,function(t){s(t,function(t,n){e[t]=n})}),e}function r(e){return s(e,function(t,n){v(n)&&(r(n),m(n)&&delete e[t]),(n===undefined||n===null||n==="")&&delete e[t]}),e}function s(e,t){for(var n in e)(!e.hasOwnProperty||e.hasOwnProperty(n))&&t(n,e[n]);return e}function c(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function h(e,t){return e==c(t)}function p(e,t,n){return n=n||[],function(){var r=a(arguments,function(e){return e});return e.apply(t,n.concat(r))}}function v(e){return e===Object(e)}function m(e){if(!v(e))return!1;if(Object.keys)return!Object.keys(e).length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function g(e,t){window.setTimeout(function(){e.call(t||null)},0)}function y(e){return Array.prototype.slice.call(e)}var i=function(){var e=Array.prototype.indexOf;return t(e)?function(t,n){return t?e.apply(t,[n]):-1}:function(e,t){if(!e)return-1;for(var n=0,r=e.length;n<r;n++)if(t==e[n])return n;return-1}}(),o=function(){var e=Array.prototype.forEach;return t(e)?function(t,n){if(!t)return;if(!n)return;e.apply(t,[n])}:function(e,t){if(!e)return;if(!t)return;for(var n=0,r=e.length;n<r;n++)t(e[n],n)}}(),u=function(){var e=Array.prototype.filter;return t(e)?function(t,n){return t?n?e.apply(t,[n]):t:null}:function(e,t){if(!e)return null;if(!t)return e;var n=[],r=0,i=e.length;for(;r<i;r++)t(e[r])&&n.push(e[r]);return n}}(),a=function(){var e=Array.prototype.map;return t(e)?function(t,n){return t?n?e.apply(t,[n]):t:null}:function(e,t){if(!e)return null;if(!t)return e;var n=[],r=0,i=e.length;for(;r<i;r++)n.push(t(e[r]));return n}}(),f=function(){var e=Array.prototype.reduce;return t(e)?function(t,n,r){return t?n?e.apply(t,[n,r]):r:null}:function(e,t,n){if(!e)return null;if(!t)return n;var r=n,i=0,s=e.length;for(;i<s;i++)r=t(r,e[i],i,e);return r}}(),l=function(){var e=String.prototype.trim;return t(e)?function(t){return t&&e.apply(t)}:function(e){return e&&e.replace(/(^\s+|\s+$)/g,"")}}(),d=t(Object.create)?Object.create:function(e){function t(){}return t.prototype=e,new t};e({aug:n,async:g,compact:r,forIn:s,forEach:o,filter:u,map:a,reduce:f,trim:l,indexOf:i,isNative:t,isObject:v,isEmptyObject:m,createObject:d,bind:p,toType:c,isType:h,toRealArray:y})});
provide("tfw/intents/main",function(e){using("util/util","imports/jquery",function(t,n){window.self==window.top&&(document.body.className+=" js",document.documentElement.style.display="block");var s={keyCodes:{enter:13,escape:27,esc:27,tab:9,spacebar:32,upArrow:38,downArrow:40}},o="#username_or_email, #password",u;n(document).ready(function(){function a(e){n(e).parents(".row").toggleClass("content",e.value.length>0)}n(o).bind("keyup blur",function(){a(this)}),setInterval(function(){n(o).each(function(){a(this)})},500),n("label").click(function(){this.htmlFor&&document.getElementById(this.htmlFor).focus()}),0=="autofocus"in document.createElement("input")&&n("input, textarea").each(function(e,t){if(t.getAttribute("autofocus"))return t.focus(),!1}),u=n("#session"),n(document).bind({click:function(e){var t=n(".user-menu").get(0),r=n(".current-user a").get(0);if(!t&&!r)return;e.target===r||n.contains(r,e.target)?(e.preventDefault(),u.hasClass("show")?u.removeClass("show").removeClass("opt"):(e.altKey&&u.addClass("opt"),u.toggleClass("show"))):e.target!==t&&!n.contains(t,e.target)&&n("#session").removeClass("show").removeClass("opt")},keyup:function(e){e.keyCode===s.keyCodes.escape&&n("#session").removeClass("show").removeClass("opt")}}),window.opener&&(n("a").each(function(){var e=n(this);if(this.href.match(/^https?:\/\/([a-z0-9.\-]+\.)?([a-z0-9.\-]+\.)?twitter\.com(:[0-9]+)?\/(share|intent)/)||e.hasClass("maintain-context"))return;this.target="_blank",e.hasClass("exit")&&e.click(function(){window.close()}),e.hasClass("alternate-context")&&e.click(function(){setTimeout(function(){window.close()},500)})}),n(".button.cancel").click(function(){return window.close(),!1}),n(document.body).hasClass("autoclose")&&(window.twttr||(window.twttr={}),window.twttr.tfw||(window.twttr.tfw={}),window.twttr.tfw.autoCloseTimeout=setTimeout(function(){window.close()},1))),n(".follow-button").bind("mouseleave blur",function(){n(this).removeClass("followed")})})})})